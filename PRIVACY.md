# Privacy & Anonymity Architecture  

## Главный принцип  

> **"Никто не может знать, кто пишет"**  

Данные тут крайне личные, поэтому приватность и анонимность — не опция, а база.  

---  

## Какие варианты я рассмотрел  

При проектировании было несколько подходов:  

**1. End-to-End шифрование** — собственная библиотека с полным шифрованием данных в БД  
**2. Хеширование email** — `user_id = hash(email + salt)` вместо прямого хранения  
**3. Web3 auth** — авторизация через Crypto Wallet    
**4. Seed phrase / Recovery codes** — 12 слов для восстановления доступа  
**5. Кастомная фраза восстановления** — пользователь сам придумывает секретную фразу  

**Все варианты отклонены.** Причины: излишняя сложность, несовместимость с AI-анализом текста (шифрование), всё равно есть риски утечки/забывчивости, плохой UX.  

---  

## Выбранное решение: Максимальная простота + Полная анонимность  
 
### Архитектура  

**Регистрация:** Только логин + пароль. Никаких email, телефонов, внешних OAuth.  

**User ID:** Обычный автоинкремент `SERIAL PRIMARY KEY` — просто порядковый номер, не связанный с личностью.  

**Восстановление пароля:** Невозможно. Забыл пароль = потерял доступ. Это цена анонимности.  

**Защита от ботов:** Обычная CAPTCHA при регистрации + rate limiting.  

**Данные в БД:**  
```sql
users: id, login, password_hash, created_at  
entries: id, user_id, content (plaintext!), entry_type, created_at
entry_metadata: tags, emotion_score, keywords, date  
```

**Почему plaintext?** AI/нейронка должна анализировать сны и генерировать картинки. Шифрование делает это невозможным.  

**Гарантия анонимности:** Даже при утечке БД невозможно связать записи с реальными людьми — нет email, телефонов, имён. User ID — просто число.  

---

## Философия  

**Простота:** Чем проще код, тем меньше багов и уязвимостей.   

**Честность:** Я не обещаю восстановление пароля. Предупреждаю заранее.   

**Прозрачность:** Опенсорс. Любой может проверить что я не собираю лишние данные.  

---

## Риски  

**Утечка БД:** Контент записей читаем, но невозможно определить авторов (нет персональных данных).  

**Потеря доступа:** Пользователи могут забыть пароль. Митигация: жирные предупреждения + опция экспорта данных.  

**Деанонимизация через контент:** Если пользователь сам пишет идентифицирующие детали ("работаю в компании N") — это его ответственность.  

---  

## Для разработчиков  

**Privacy by Design:** Не собираем данные, которые не нужны. Не логируем IP, геолокацию, device fingerprints.  

**Code Review:** При добавлении функций проверяй: не создаётся ли связь user_id ↔ реальная личность?  

**Принцип:** Любые изменения, добавляющие сбор персональных данных, будут отклонены.  

---  

## FAQ  

**Q: Почему нельзя восстановить пароль?**  
A: Для восстановления нужен email/телефон. Это уничтожает анонимность.  

**Q: Что если я забуду пароль?**  
A: Доступ потерян навсегда. Это цена полной анонимности. Я честно предупреждаю об этом.  

**Q: Почему не шифруете контент?**  
A: AI не может анализировать зашифрованные данные. Анонимность (отсутствие связи с личностью) важнее шифрования.  

**Q: Как доверять?**  
A: Опенсорс. Проверьте код сами.  

---

**Версия:** 1.0 | **Дата:** October 2025  