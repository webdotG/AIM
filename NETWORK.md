# Сетевая архитектура конспект по созданию домашней сети 

> описывает защиту и организацию серверов для тестового окружения  
> **О:** Три изолированные сети + VPN контроль + Wireshark анализ трафика  

**Статус:** В разработке Конспект  
**Дата:** Ноябрь 2025  

---

## Общая схема

```
Internet (Static White IP: 31.134.174.22)
         │
         │ (2-3 порта открыты для внешнего доступа)
         │
         ↓
┌─────────────────────────────────────────────────────────────────┐
│  MikroTik Hub (гигабитный, 2GHz + 5GHz)                         │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │ Функции:                                                  │  │
│  │ • Routing + Firewall + NAT                                │  │
│  │ • Proxy server                                            │  │
│  │ • Port forwarding (80, 443 → Main Server)                 │  │
│  │ • VLAN изоляция (3 независимые сети)                      │  │
│  │ • DPI (Deep Packet Inspection) для Wireshark              │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
│  ┌──────────────┬──────────────────────┬────────────────────┐  │
│  │  Гостевая    │  Домашняя VPN сеть   │  IoT сеть (Zigbee) │  │
│  │  сеть        │  (контролируемая)    │                    │  │
│  └──────────────┴──────────────────────┴────────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
         │                    │                        │
         │                    │                        │
         ↓                    ↓                        ↓

┌──────────────┐   ┌───────────────────────┐   ┌─────────────────┐
│ Гостевая     │   │ Домашняя VPN          │   │ IoT устройства  │
│ WiFi 5GHz    │   │ WiFi 2GHz + LAN       │   │ (Zigbee 3.0)    │
│              │   │                       │   │ WiFi 2GHz       │
│ • Телефоны   │   │ ┌──────────────────┐  │   │                 │
│   гостей     │   │ │ OpenConnect VPN  │  │   │ • Лампочки      │
│ • Ноутбуки   │   │ │ (маршрутизация)  │  │   │ • Датчики       │
│              │   │ └────────┬─────────┘  │   │ • Розетки       │
│ Доступ:      │   │          │            │   │                 │
│ • Только     │   │     ┌────┴─────┐      │   │ Управление:     │
│   интернет   │   │     │ Germany  │      │   │ • Raspberry Pi  │
│ • Нет LAN    │   │     │ Server   │      │   │   Zigbee Hub    │
│              │   │     │ (VPN)    │      │   │   (проводник)   │
└──────────────┘   │     └──────────┘      │   └────────┬────────┘
                   │          ↓            │            │
                   │   ┌──────────────┐    │   ┌────────┴────────┐
                   │   │ Wireshark    │    │   │ Raspberry Pi    │
                   │   │ Monitoring   │    │   │ IP: 192.168.3.x │
                   │   └──────────────┘    │   │ LAN подключение │
                   │          │            │   └─────────────────┘
                   │   ┌──────┴──────┐     │
                   │   │ Main Server │     │
                   │   │ (Docker)    │     │
                   │   │ LAN кабель  │     │
                   └───┴─────────────┴─────┘
                            ↓
┌──────────────────────────────────────────────────────────┐
│  Main Server (512GB, Linux)                              │
│  IP: 192.168.2.10 (статический DHCP)                     │
│                                                           │
│  ┌────────────────────────────────────────────────────┐  │
│  │  Wireshark Packet Capture                          │  │
│  │  • Входящий трафик (из интернета)                  │  │
│  │  • Исходящий трафик (к интернету)                  │  │
│  │  • Межсетевой трафик (VPN ↔ IoT)                   │  │
│  │  • Поиск уязвимостей и аномалий                    │  │
│  └────────────────────────────────────────────────────┘  │
│                                                           │
│  ┌────────────────────────────────────────────────────┐  │
│  │  Docker Compose Network                            │  │
│  │                                                    │  │
│  │  ┌────────────┐                                    │  │
│  │  │   NGINX    │ :443 (SSL)                        │  │
│  │  │ Reverse    │ :80 (redirect → 443)              │  │
│  │  │  Proxy     │                                    │  │
│  │  └─────┬──────┘                                    │  │
│  │        │                                           │  │
│  │        ├─→ /      → Web App (статика)             │  │
│  │        ├─→ /tg    → Telegram App (статика)        │  │
│  │        └─→ /api   → Backend API (Express)         │  │
│  │                                                    │  │
│  │  ┌──────────┐  ┌──────────────┐                   │  │
│  │  │ Web App  │  │ Telegram App │                   │  │
│  │  │  :3000   │  │    :3001     │                   │  │
│  │  └────┬─────┘  └──────┬───────┘                   │  │
│  │       │                │                           │  │
│  │       └────────┬───────┘                           │  │
│  │                ↓                                   │  │
│  │         ┌─────────────┐                            │  │
│  │         │  Backend    │                            │  │
│  │         │   Express   │                            │  │
│  │         │    :4000    │                            │  │
│  │         └──────┬──────┘                            │  │
│  │                │                                   │  │
│  │                ↓                                   │  │
│  │         ┌─────────────┐                            │  │
│  │         │ PostgreSQL  │                            │  │
│  │         │   :5432     │                            │  │
│  │         └─────────────┘                            │  │
│  │                                                    │  │
│  │  Внутренняя bridge сеть (isolated)                │  │
│  └────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────┘

         (В домашней VPN сети)
                    ↓
┌──────────────────────────────────────────────────────────┐
│  AI Server (Python, GPU)                                 │
│  IP: 192.168.2.20 (статический)                          │
│  Доступ: ТОЛЬКО из домашней VPN сети                     │
│                                                           │
│  • Психоаналитик (Jungian analysis)                      │
│  • Image Generation (Stable Diffusion?)                  │
│  • Video Generation                                      │
│  HTTP API :8000                                          │
└──────────────────────────────────────────────────────────┘
```
...
```


..........
.....
...............
...
........
```
## Полный конспект и в общем сети -> - **->** [Net](https://t.me/KirillGrant)